var module=angular.module("noDblclick",["ng"]);module.service("noDblclickService",[function(){"use strict";var a={},b={},c=0,d=function(a){return angular.isString(a)&&void 0!==b[a]?b[a]:a},e=function(b){return angular.isString(b)||void 0===a[b]?b:a[b].key},f=function(b,c){b=d(b),a[b].isDisabled!==c&&(a[b].isDisabled=c)};this.isDisabled=function(b){return b=d(b),void 0!==b&&a[b]?a[b].isDisabled:!1},this.lock=function(a){f(a,!0)},this.unlock=function(a){f(a,!1)},this.get=function(b){return b=d(b),a[b]||void 0},this.add=function(d){if(d&&(!angular.isString(d)||angular.isString(d)&&b[d]))throw"noDblclick :: Invalid key. Key must be a string and unique.";var e={id:angular.copy(c),key:d,isDisabled:!1};return c+=1,a[e.id]=e,b[d]=e.id,e},this.remove=function(c){delete b[e(c)],delete a[d(c)]}}]).directive("noDblclick",["noDblclickService","$compile","$parse",function(a,b,c){"use strict";function d(d){function e(b,d,e,h,i){b.noDblclickService||(b.noDblclickService=a,b.noDblclickServiceClick=function(d){if(!a.isDisabled(d)){var e=c(a.get(d).ngClick);e(b)}});var j=[];j.push(b.$on("noDblclick.unlock",function(b,c){a.unlock(void 0===c?g.id:c)})),j.push(b.$on("noDblclick.lock",function(b,c){a.lock(void 0===c?g.id:c)})),b.$on("$destroy",function(){angular.forEach(j,function(b){b(),a.remove(g.id)})}),i(function(a){d.append(a)}),f(b)}var f,g,h=(d.attr("ng-click")||"").replace(/\s/g,""),i=(d.attr("ng-dblclick")||"").replace(/\s/g,""),j=(d.attr("ng-disabled")||"").replace(/\s/g,"");return g=a.add(d.attr("no-dblclick")),""!==h&&h.indexOf(";",h.length-1)<0&&(h+=";"),h+="noDblclickService.lock("+g.id+");",g.ngClick=h,""!==i&&i.indexOf(";",i.length-1)<0&&(i+=";"),i="return -1;",""!==j&&(j="("+j+") || "),j+="noDblclickService.isDisabled("+g.id+");",d.attr("ng-click","noDblclickServiceClick("+g.id+")"),d.attr("ng-dblclick",i),d.attr("ng-disabled",j),f=b(d,null,1500),e}return{compile:d,priority:1500,restrict:"A",terminal:!0,transclude:!0}}]);